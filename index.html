<!-- first code -->

package StepDefinitions;

import io.cucumber.java.en.*;
import static org.junit.Assert.*;
import io.restassured.RestAssured;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class DepositTransactionsSteps {

    private String accountType;
    private String baseUrl;
    private Response response;
    private List<Map<String, Object>> recentTransactions;

    @Given("I am a small business retail deposit account holder")
    public void i_am_a_small_business_retail_deposit_account_holder() {
        accountType = "Retail Deposit Account";
        String environment = "local"; // Example: Change as needed (local, dev, QA)
        String accountId = "123456"; // Example account ID
        baseUrl = "https://" + environment + ".bankingapi.com/accounts/" + accountId + "/transactions";

        System.out.println("Account Type: " + accountType);
        System.out.println("Constructed URL: " + baseUrl);

        assertNotNull("Account Type should not be null", accountType);
        assertNotNull("Base URL should not be null", baseUrl);
    }

    @When("I check my recent transactions")
    public void i_check_my_recent_transactions() {
        RequestSpecification request = RestAssured.given();

        // Setting generic headers
        Map<String, String> headers = new HashMap<>();
        headers.put("Authorization", "Bearer sample-token");
        headers.put("Client-Correlation-ID", "xyz-123");
        headers.put("Accept", "application/json");

        request.headers(headers);

        // Making the GET request
        response = request.get(baseUrl);
        assertNotNull("Response should not be null", response);

        // Extracting transactions from response
        recentTransactions = response.jsonPath().getList("transactions");
        System.out.println("Retrieved Transactions: " + recentTransactions);
    }

    @Then("I am able to see my posted transactions")
    public void i_am_able_to_see_my_posted_transactions() {
        assertEquals("Expected HTTP 200 OK", 200, response.getStatusCode());
        assertNotNull("Transactions should not be null", recentTransactions);
        assertFalse("Transactions should not be empty", recentTransactions.isEmpty());

        System.out.println("Successfully retrieved transactions: " + recentTransactions);
    }
}


<!-- fourth test case -->

SavingsAccountTransactions.feature

Feature: Savings Account Recent Transactions

  Scenario: Recent transactions success for profile savings account
    Given I am a small business profile savings account holder
    When I review my recent transactions for savings account
    Then I should see my posted transactions for savings account


    <!-- step -->

    <!-- SavingsAccountTransactionsSteps -->


    package StepDefinitions;

import io.cucumber.java.en.*;
import static org.junit.Assert.*;
import java.util.List;

public class SavingsAccountTransactionsSteps {

    private String accountType;
    private List<String> recentTransactions;

    @Given("I am a small business profile savings account holder")
    public void i_am_a_small_business_profile_savings_account_holder() {
        accountType = "Profile Savings Account";
        System.out.println("Account Type: " + accountType);
    }

    @When("I review my recent transactions for savings account")
    public void i_review_my_recent_transactions_for_savings_account() {
        // Simulating transaction retrieval for savings account
        recentTransactions = List.of("Deposit - $500", "Withdrawal - $100", "Interest - $10");
        System.out.println("Retrieved Transactions for Savings Account: " + recentTransactions);
    }

    @Then("I should see my posted transactions for savings account")
    public void i_should_see_my_posted_transactions_for_savings_account() {
        assertNotNull("Transactions should not be null", recentTransactions);
        assertFalse("Transactions should not be empty", recentTransactions.isEmpty());
        System.out.println("Successfully retrieved transactions: " + recentTransactions);
    }
}

<!-- fifth test case -->

RetailCDAccountTransactions.feature

Feature: Retail CD account recent transactions

  Scenario: Deposit account recent transactions success for retail CD account
    Given I am a small business retail CD account holder
    When I request my recent transactions for the CD account
    Then I should receive a list of posted transactions for the CD account

    <!-- step -->
    RetailCDAccountTransactionsSteps


    package StepDefinitions;

import io.cucumber.java.en.*;
import static org.junit.Assert.*;
import java.util.List;

public class RetailCDAccountTransactionsSteps {

    private String accountType;
    private List<String> recentTransactions;

    @Given("I am a small business retail CD account holder")
    public void i_am_a_small_business_retail_cd_account_holder() {
        accountType = "Retail CD Account";
        System.out.println("Account Type: " + accountType);
    }

    @When("I request my recent transactions for the CD account")
    public void i_request_my_recent_transactions_for_the_cd_account() {
        // Simulating transaction retrieval for retail CD account
        recentTransactions = List.of("Interest - $50", "Deposit - $1000", "Maturity - $2000");
        System.out.println("Retrieved Transactions for Retail CD Account: " + recentTransactions);
    }

    @Then("I should receive a list of posted transactions for the CD account")
    public void i_should_receive_a_list_of_posted_transactions_for_the_cd_account() {
        assertNotNull("Transactions should not be null", recentTransactions);
        assertFalse("Transactions should not be empty", recentTransactions.isEmpty());
        System.out.println("Successfully retrieved transactions: " + recentTransactions);
    }
}
