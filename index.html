import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;
import io.restassured.RestAssured;
import io.restassured.response.Response;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.equalTo;

public class SBBTransactionTest {
    private static final Logger logger = LogManager.getLogger(SBBTransactionTest.class);
    private Response response;
    private static final String BASE_URL = "https://api.example.com/sbb"; // Replace with actual URL

    @Given("the function was deployed")
    public void the_function_was_deployed() {
        logger.info("Verifying that the function is deployed.");
    }

    @When("the function is invoked")
    public void the_function_is_invoked() {
        response = RestAssured.given()
                .header("Content-Type", "application/json")
                .when()
                .get(BASE_URL + "/target-function"); // Replace with actual endpoint
        
        logger.info("Function invoked. Response status: {}", response.getStatusCode());
    }

    @Then("the function returns a successful response")
    public void the_function_returns_a_successful_response() {
        assertThat("Response status is not 200", response.getStatusCode(), equalTo(200));
        logger.info("Function executed successfully. Response: {}", response.getBody().asString());
    }
}
