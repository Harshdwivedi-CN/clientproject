import io.cucumber.java.en.Given;
import io.cucumber.java.en.When;
import io.cucumber.java.en.Then;
import java.util.logging.Logger;
import static io.restassured.RestAssured.*;
import io.restassured.response.Response;

public class DepositAccountSteps {

    private static final Logger logger = Logger.getLogger(DepositAccountSteps.class.getName());
    private Response response;

    @Given("I am a small business retail deposit account holder")
    public void i_am_a_small_business_retail_deposit_account_holder() {
        logger.info("User is a small business retail deposit account holder");
    }

    @When("I download my transactions as {string}")
    public void i_download_my_transactions_as(String format) {
        logger.info("User is downloading transactions as " + format);
        response = given()
                    .header("Authorization", "Bearer YOUR_TOKEN")
                    .queryParam("format", format)
                  .when()
                    .get("https://api.yourbank.com/transactions/download");
    }

    @When("I search for transactions by {string} with value {string}")
    public void i_search_for_transactions_by(String criteria, String value) {
        logger.info("User is searching for transactions by " + criteria + " with value " + value);
        response = given()
                    .header("Authorization", "Bearer YOUR_TOKEN")
                    .queryParam(criteria, value)
                  .when()
                    .get("https://api.yourbank.com/transactions/search");
    }

    @Then("I receive a {string} file")
    public void i_receive_a_file(String format) {
        logger.info("User received a " + format + " file");
        response.then().statusCode(200);
    }

    @Then("I receive a 403 unauthorized error")
    public void i_receive_a_403_unauthorized_error() {
        logger.warning("User received a 403 unauthorized error");
        response.then().statusCode(403);
    }

    @Then("I am able to see my searched transactions")
    public void i_am_able_to_see_my_searched_transactions() {
        logger.info("User can see searched transactions");
        response.then().statusCode(200);
    }
}
